RZPM_BEGIN

RZPM_GIT "https://github.com/rizinorg/rizin-extras"
RZPM_DESC "[syslib] dwarf parser"

RZPM_INSTALL() {
	if ! $(pkg-config --exists libdwarf); then
		if ! $(rz-pm -l libdwarf); then
			echo "Running: rz-pm -i libdwarf"
			rz-pm -i libdwarf
		fi
	fi

	./configure --prefix="${RZPM_PREFIX}" || exit 1
	${MAKE} -C dwarf || exit 1
	${MAKE} -C dwarf install RZPM_PLUGDIR="${RZPM_PLUGDIR}" || exit 1
}

RZPM_UNINSTALL() {
	rm ${RZPM_PLUGDIR}/dparser*
	${MAKE} -C dwarf clean
}

RZPM_END
