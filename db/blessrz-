RZPM_BEGIN

RZPM_GIT "https://github.com/rizinorg/rizin-extras"
RZPM_DESC "[tui-node] Bless-based rizin TUI"

BINDIR="${RZPM_PLUGDIR}/../bin"

RZPM_INSTALL() {
	cd blessrz
	node --version || exit 1
	npm install || exit 1
	mkdir -p "${BINDIR}"
	echo '#!/bin/sh' > "${BINDIR}/blessrz"
	echo "exec node '`pwd`'"'/index.js $*' >> "${BINDIR}/blessrz"
	chmod +x "${BINDIR}"/blessrz
	echo "Include ${BINDIR} in your PATH"
}

RZPM_UNINSTALL() {
	rm -f "${BINDIR}"/blessrz
}

RZPM_END
